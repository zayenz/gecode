language: cpp

git:
  depth: 20
  
branches:
  only:
    - master
    - develop
    - /^feature\/.*$/
    - /^release\/.*$/
    - /^hotfix\/.*$/

# Use Ubuntu Trusty (14) for mostly up-to-date packages
sudo: required
dist: trusty
language: cpp

#env: BUILD_CONFIG=Debug 

# Travis compilers are out of date if we want to use modern C++1y features. Need to
# explicitly specify external packages required and versions in matrix.
# Problems for earlier compilers include <codecvt> coverage on GCC.
#
# More info: http://genbattle.bitbucket.org/blog/2016/01/17/c++-travis-ci/
# matrix example: https://github.com/ColinH/PEGTL/blob/master/.travis.yml
#
# currently issue for adding the Trusty LLVM ppa to Travisâ€™ whitelist, previous, 12.04
# issue: https://github.com/travis-ci/apt-source-whitelist/pull/205
matrix:
  include:
    - os: osx
      osx_image: xcode7.3
      compiler: clang
      env: COMPILER=clang++ DYLD_LIBRARY_PATH=.
    - os: linux
      compiler: gcc
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-4.9
      env: COMPILER=g++-4.9 LD_LIBRARY_PATH=.
    - os: linux
      compiler: gcc
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-5
      env: COMPILER=g++-5 LD_LIBRARY_PATH=.
    - os: linux
      compiler: clang
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
            - llvm-toolchain-precise-3.6
          packages:
            - clang-3.6
      env: COMPILER=clang++-3.6 LD_LIBRARY_PATH=.
    - os: linux
      compiler: clang
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
            - llvm-toolchain-precise-3.7
          packages:
            - clang-3.7
      env: COMPILER=clang++-3.7 LD_LIBRARY_PATH=.
    - os: linux
      compiler: clang
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
            - llvm-toolchain-precise-3.8
          packages:
            - clang-3.8
      env: COMPILER=clang++-3.8 LD_LIBRARY_PATH=.
      
#install: ./ci/travis/install.sh
  
#before_script: ./ci/travis/make_build.sh

notifications:
  email:
    on_failure: change
    on_success: change

#env:
#  global: 
#    - 
  
script:
  - ./configure && make && make install && make check
